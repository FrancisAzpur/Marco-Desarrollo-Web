<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test API - Shop Trust</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4">Prueba de APIs REST - Shop Trust</h1>
        
        <!-- Categorías -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Categorías API</h3>
            </div>
            <div class="card-body">
                <div class="row g-2 mb-3">
                    <div class="col-md-3">
                        <button onclick="getCategorias()" class="btn btn-info w-100">GET Todas</button>
                    </div>
                    <div class="col-md-3">
                        <button onclick="getCategoriasActivas()" class="btn btn-success w-100">GET Activas</button>
                    </div>
                    <div class="col-md-3">
                        <button onclick="crearCategoriaTest()" class="btn btn-primary w-100">POST Nueva</button>
                    </div>
                </div>
                <pre id="categoriasResult" class="bg-dark text-white p-3" style="max-height: 300px; overflow-y: auto;"></pre>
            </div>
        </div>

        <!-- Productos -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h3 class="mb-0">Productos API</h3>
            </div>
            <div class="card-body">
                <div class="row g-2 mb-3">
                    <div class="col-md-3">
                        <button onclick="getProductos()" class="btn btn-info w-100">GET Todos</button>
                    </div>
                    <div class="col-md-3">
                        <button onclick="getProductosActivos()" class="btn btn-success w-100">GET Activos</button>
                    </div>
                    <div class="col-md-3">
                        <button onclick="getProductosStockBajo()" class="btn btn-warning w-100">GET Stock Bajo</button>
                    </div>
                    <div class="col-md-3">
                        <button onclick="crearProductoTest()" class="btn btn-primary w-100">POST Nuevo</button>
                    </div>
                </div>
                <pre id="productosResult" class="bg-dark text-white p-3" style="max-height: 300px; overflow-y: auto;"></pre>
            </div>
        </div>

        <!-- Clientes -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h3 class="mb-0">Clientes API</h3>
            </div>
            <div class="card-body">
                <div class="row g-2 mb-3">
                    <div class="col-md-4">
                        <button onclick="getClientes()" class="btn btn-info w-100">GET Todos</button>
                    </div>
                    <div class="col-md-4">
                        <button onclick="getClientesActivos()" class="btn btn-success w-100">GET Activos</button>
                    </div>
                    <div class="col-md-4">
                        <button onclick="crearClienteTest()" class="btn btn-primary w-100">POST Nuevo</button>
                    </div>
                </div>
                <pre id="clientesResult" class="bg-dark text-white p-3" style="max-height: 300px; overflow-y: auto;"></pre>
            </div>
        </div>

        <!-- Proveedores -->
        <div class="card mb-4">
            <div class="card-header bg-warning text-white">
                <h3 class="mb-0">Proveedores API</h3>
            </div>
            <div class="card-body">
                <div class="row g-2 mb-3">
                    <div class="col-md-4">
                        <button onclick="getProveedores()" class="btn btn-info w-100">GET Todos</button>
                    </div>
                    <div class="col-md-4">
                        <button onclick="getProveedoresActivos()" class="btn btn-success w-100">GET Activos</button>
                    </div>
                    <div class="col-md-4">
                        <button onclick="crearProveedorTest()" class="btn btn-primary w-100">POST Nuevo</button>
                    </div>
                </div>
                <pre id="proveedoresResult" class="bg-dark text-white p-3" style="max-height: 300px; overflow-y: auto;"></pre>
            </div>
        </div>
    </div>

    <script>
        // Categorías
        async function getCategorias() {
            try {
                const response = await fetch('/categorias/api');
                const data = await response.json();
                document.getElementById('categoriasResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('categoriasResult').textContent = 'Error: ' + error.message;
            }
        }

        async function getCategoriasActivas() {
            try {
                const response = await fetch('/categorias/api/activas');
                const data = await response.json();
                document.getElementById('categoriasResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('categoriasResult').textContent = 'Error: ' + error.message;
            }
        }

        async function crearCategoriaTest() {
            const categoria = {
                nombreCategoria: 'Test Categoría ' + Date.now(),
                descripcion: 'Categoría de prueba creada desde API',
                activo: true
            };

            try {
                const response = await fetch('/categorias/api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(categoria)
                });
                const data = await response.json();
                document.getElementById('categoriasResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('categoriasResult').textContent = 'Error: ' + error.message;
            }
        }

        // Productos
        async function getProductos() {
            try {
                const response = await fetch('/productos/api');
                const data = await response.json();
                document.getElementById('productosResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('productosResult').textContent = 'Error: ' + error.message;
            }
        }

        async function getProductosActivos() {
            try {
                const response = await fetch('/productos/api/activos');
                const data = await response.json();
                document.getElementById('productosResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('productosResult').textContent = 'Error: ' + error.message;
            }
        }

        async function getProductosStockBajo() {
            try {
                const response = await fetch('/productos/api/stock-bajo');
                const data = await response.json();
                document.getElementById('productosResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('productosResult').textContent = 'Error: ' + error.message;
            }
        }

        async function crearProductoTest() {
            const producto = {
                codigoProducto: 'TEST' + Date.now(),
                nombreProducto: 'Producto Test ' + Date.now(),
                descripcion: 'Producto de prueba',
                categoria: { idCategoria: 1 },
                precioCompra: 100.00,
                precioVenta: 150.00,
                stockActual: 10,
                stockMinimo: 5,
                activo: true
            };

            try {
                const response = await fetch('/productos/api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(producto)
                });
                const data = await response.json();
                document.getElementById('productosResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('productosResult').textContent = 'Error: ' + error.message;
            }
        }

        // Clientes
        async function getClientes() {
            try {
                const response = await fetch('/clientes/api');
                const data = await response.json();
                document.getElementById('clientesResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('clientesResult').textContent = 'Error: ' + error.message;
            }
        }

        async function getClientesActivos() {
            try {
                const response = await fetch('/clientes/api/activos');
                const data = await response.json();
                document.getElementById('clientesResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('clientesResult').textContent = 'Error: ' + error.message;
            }
        }

        async function crearClienteTest() {
            const cliente = {
                nombreCompleto: 'Cliente Test ' + Date.now(),
                documentoIdentidad: '99999' + Date.now().toString().substr(-3),
                tipoDocumento: 'DNI',
                telefono: '999888777',
                correoElectronico: 'test@test.com',
                direccion: 'Dirección de prueba',
                activo: true
            };

            try {
                const response = await fetch('/clientes/api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(cliente)
                });
                const data = await response.json();
                document.getElementById('clientesResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('clientesResult').textContent = 'Error: ' + error.message;
            }
        }

        // Proveedores
        async function getProveedores() {
            try {
                const response = await fetch('/proveedores/api');
                const data = await response.json();
                document.getElementById('proveedoresResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('proveedoresResult').textContent = 'Error: ' + error.message;
            }
        }

        async function getProveedoresActivos() {
            try {
                const response = await fetch('/proveedores/api/activos');
                const data = await response.json();
                document.getElementById('proveedoresResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('proveedoresResult').textContent = 'Error: ' + error.message;
            }
        }

        async function crearProveedorTest() {
            const proveedor = {
                nombreEmpresa: 'Proveedor Test ' + Date.now(),
                ruc: '20' + Date.now().toString().substr(-9),
                contactoNombre: 'Contacto Test',
                contactoTelefono: '999888777',
                contactoEmail: 'proveedor@test.com',
                direccion: 'Dirección proveedor',
                activo: true
            };

            try {
                const response = await fetch('/proveedores/api', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(cliente)
                });
                const data = await response.json();
                document.getElementById('proveedoresResult').textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('proveedoresResult').textContent = 'Error: ' + error.message;
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
